================================================================================
MENU IMPORT FUNCTIONALITY - IMPLEMENTATION LOG
================================================================================
Date: 2024-12-19
Feature: Menu Import from JSON File
================================================================================

OVERVIEW
--------
Implemented a menu import system that allows administrators to bulk import menu 
items from a JSON file (menu.json) into the Firebase database. This feature 
automatically parses the menu.json file, extracts menu items with their categories,
names, and prices, and saves them to Firebase.

FILES CREATED
-------------
1. app/src/main/java/com/group14/foodordering/util/MenuJsonParser.java
   - New utility class for parsing menu.json files
   - Handles both assets folder and file path reading
   - Automatically detects categories and menu items

FILES MODIFIED
--------------
1. app/src/main/java/com/group14/foodordering/TestDataActivity.java
   - Added "Import Menu from JSON" button
   - Added importMenuFromJson() method
   - Integrated with Firebase to save parsed menu items

2. app/src/main/res/layout/activity_test_data.xml
   - Added import button to the UI layout

3. app/src/main/assets/menu.json
   - Copied from information/menu.json to assets folder
   - This is the source file that gets parsed

IMPLEMENTATION DETAILS
----------------------

MenuJsonParser Class:
---------------------
- Location: com.group14.foodordering.util.MenuJsonParser
- Purpose: Parse menu.json file and convert to MenuItem objects
- Methods:
  * parseMenuFromAssets(Context, String) - Read from assets folder
  * parseMenuFromFile(String) - Read from file path
  * parseMenu(BufferedReader) - Core parsing logic
  * isCategoryHeader(String) - Detect category headers
  * normalizeCategory(String) - Normalize category names
  * parsePrice(String) - Extract price from text
  * isNonItemLine(String) - Filter out non-menu items

Parsing Logic:
--------------
1. Reads menu.json line by line
2. Detects category headers (Breakfast, Lunch, Dinner, etc.)
3. Identifies menu items (lines before price lines)
4. Extracts prices (lines starting with $)
5. Creates MenuItem objects with:
   - Unique ID (UUID-based)
   - Item name
   - Category
   - Price
   - Description
   - Availability status (set to true)

Category Detection:
------------------
Supported categories:
- Breakfast -> "breakfast"
- Lunch -> "lunch"
- Dinner -> "dinner"
- Hot Drinks / Hot Drink -> "beverage"
- Cold Drinks / Cold Drink -> "beverage"
- Beverage -> "beverage"
- Default -> "main"

Price Parsing:
-------------
- Supports formats: $XX, $XX.XX, $XX.XXX
- Handles various text patterns around prices
- Extracts numeric value from price strings

TestDataActivity Integration:
-----------------------------
- Added "Import Menu from JSON" button in TestDataActivity
- Button triggers importMenuFromJson() method
- Displays progress and results in TextView
- Shows success/failure counts
- Provides user feedback via Toast messages

USAGE INSTRUCTIONS
------------------

Step 1: Access Test Data Page
- Login as administrator in MainActivity
- Click "Test Data" button

Step 2: Import Menu
- Click "Import Menu from JSON" button
- Wait for import to complete
- View results in the text output area

Step 3: Verify Import
- Check Firebase database for menuItems collection
- Verify items are categorized correctly
- Check prices are accurate

TECHNICAL NOTES
---------------

File Reading Priority:
1. First tries to read from assets folder (app/src/main/assets/menu.json)
2. Falls back to information folder if assets not available (development mode)

Error Handling:
- Handles missing files gracefully
- Logs parsing errors for debugging
- Skips invalid lines (UI elements, comments, etc.)
- Validates price format before parsing

Data Structure:
- Each menu item gets a unique ID: "item_" + UUID
- Category is normalized to lowercase
- All items are set as available by default
- Description is set to item name

IMPROVEMENTS MADE
-----------------
1. Enhanced parsing to handle item names on previous lines
2. Added previousLine tracking for better item name detection
3. Improved category detection with more flexible matching
4. Better error handling and logging
5. Support for both assets and file path reading

KNOWN LIMITATIONS
-----------------
1. Menu items must have prices in $XX format
2. Item names should appear before their prices
3. Category headers must match known patterns
4. Multi-line descriptions not fully supported
5. Images are not imported (only text data)

FUTURE ENHANCEMENTS
-------------------
1. Support for multi-line item descriptions
2. Image URL import from JSON
3. Batch update capability
4. Import validation and preview
5. Export functionality to backup menu data
6. Support for additional data fields (nutrition, allergens, etc.)

TESTING
-------
To test the import functionality:
1. Ensure menu.json exists in assets folder
2. Run app and navigate to Test Data page
3. Click "Import Menu from JSON"
4. Check Firebase console for imported items
5. Verify item count matches expected number

FIREBASE STRUCTURE
------------------
Imported items are saved to:
- Collection: menuItems
- Document ID: Auto-generated (item_<UUID>)
- Fields:
  * id: String (item_<UUID>)
  * name: String (item name)
  * description: String (item name)
  * price: Double (price value)
  * category: String (normalized category)
  * available: Boolean (true)
  * imageUrl: String (empty)

================================================================================
END OF LOG
================================================================================

